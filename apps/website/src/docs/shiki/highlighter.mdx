---
title: Shiki Highlighter
description: The main highlighter utility to render syntax highlighted code.
category: [Shiki, Markdown, MDX, Client]
---

[Shiki](https://shiki.style/) is a syntax highlighting library based on TextMate grammars. It transforms source code into accurate, theme-aware HTML, matching the highlighting used in VS Code.

## Installation

### shadcn/ui

<CopyShadcnCommand name="shiki-highlighter" />

### Manual

1. Install the following dependencies:

<CodeBlockSelectPkg
  title="Shiki Dependencies"
  type="install"
  command="shiki -D"
/>

As optional, you can also install separate packages for themes and languages:

<CodeBlockSelectPkg
  title="Shiki Themes and Languages"
  type="install"
  command="@shikijs/themes @shikijs/langs -D"
/>

2. Create a your shiki utility file:

<ShowSource component="shiki-highlighter" />

For better performance, **this utility only imports the languages and themes that you will use**. If you don't prefer importing specific items, you can use [`shiki/bundle/web`](https://shiki.style/guide/bundles#shiki-bundle-web) directly:

```ts
import {
  type Highlighter,
  type RegexEngine,
  createHighlighter,
} from "shiki/bundle/web";

let highlighter: Promise<Highlighter> | null = null;

// ...

const highlight = async (): Promise<Highlighter> => {
  highlighter ??= createHighlighter({
    langs: ["html", "js", "ts", "tsx", "css", "bash", "mdx"],
    themes: ["one-light", "one-dark-pro"],
    engine: getJsEngine(),
  });
  return highlighter;
};
```

This utility exports:

- `highlight()`: A function that initializes and returns a Shiki highlighter instance with the specified theme and languages.
- `Themes`: A type with the available themes. You can use it in your UI components to type the `theme` prop.
- `Languages`: A type with the available languages. You can use it in your UI components to type the `language` prop.

## Styles

This CSS file includes light/dark mode and all transformers styles:

<ShowSource component="shiki-css" />

## Usage

You can use the `highlight` function to get syntax highlighted code. For example:

```ts title="Shiki Highlighter Usage"
import { highlight } from "@/utils/shiki";

const code = `console.log('hello')`;
const highlighter = await highlight();
const html = highlighter.codeToHtml(code, {
  lang: "javascript",
  theme: "one-light",
});
```

## Themes

There are multiple themes available in the `@shikijs/themes` package. You can find the full list of themes in the [Shiki Themes documentation](https://shiki.style/themes).

If you need to use a different theme:

1. Update the import statements in the `shiki-highlighter.ts` file:

```ts
// Themes:
import lightTheme from "@shikijs/themes/one-light"; // Light Theme
import darkTheme from "@shikijs/themes/one-dark-pro"; // Dark Theme
```

2. Update the `Themes` type:

```ts
type Themes = "one-light" | "one-dark-pro";
```

## Languages

There are multiple languages available in the `@shikijs/langs` package. You can find the full list of languages in the [Shiki Languages documentation](https://shiki.style/languages).

If you need to use different languages:

1. Update the import statements in the `shiki-highlighter.ts` file:

```ts
// Languages:
import js from "@shikijs/langs/js";
import ts from "@shikijs/langs/ts";
import tsx from "@shikijs/langs/tsx";
//...
```

2. Update the `Languages` type:

```ts
type Languages = "js" | "ts" | "tsx" | ... ;
```

## Markdown/MDX Integration

1. Install the [`@shikijs/rehype`](https://shiki.style/packages/rehype) package:

<CodeBlockSelectPkg
  title="Shiki Rehype Dependency"
  type="install"
  command="@shikijs/rehype -D"
/>

2. Create a `rehypeShikiOptions` utility to configure the MDX plugin:

```tsx
import type { RehypeShikiCoreOptions } from "@shikijs/rehype/core";

const rehypeShikiOptions: RehypeShikiCoreOptions = {
  themes: {
    light: "one-light",
    dark: "one-dark-pro",
  },
};

export { rehypeShikiOptions };
```

3. Use the `highlight` and `rehypeShikiOptions` in your MDX setup as Rehype plugin:

```ts {8}
import rehypeShiki from "@shikijs/rehype/core";
import { highlight } from "@/utils/shiki-highlighter";
import { rehypeShikiOptions } from "@/utils/rehype-shiki-options";

const highlighter = await highlight();

const mdx = await compileMDX(context, document, {
  rehypePlugins: [[rehypeShiki, highlighter, rehypeShikiOptions]],
});
```
