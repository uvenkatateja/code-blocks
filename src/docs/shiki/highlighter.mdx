---
title: Shiki Highlighter
description: The main highlighter utility to render syntax highlighted code.
category: Shiki
---

## Installation

1. Install the following dependencies:

<CopyWithPkgManager
  title="Shiki Dependencies"
  type="install"
  command="shiki -D"
/>

As optional, you can also install separate packages for themes and languages to reduce the bundle size:

<CopyWithPkgManager
  title="Shiki Themes and Languages"
  type="install"
  command="@shikijs/themes @shikijs/langs -D"
/>

2. Create a `src/utils/shiki-highlighter.ts` file and add the following code:

<ShowSource component="shiki-highlighter" />

For better performance, this utility only imports the languages and themes that you will use in the application. If you don't need to limit the imports, you can import themes and languages from `shiki` directly:

```ts {3,4}
const highlight = async (): Promise<HighlighterCore> => {
  highlighter ??= createHighlighterCore({
    themes: ["one-light", "one-dark-pro"],
    langs: ["javascript"],
    engine: getJsEngine(),
  });
  return highlighter;
};
```

This utility exports:

- `highlight()`: A function that initializes and returns a Shiki highlighter instance with the specified theme and languages.
- `Themes`: A type with the available themes. You can use it in your UI components to type the `theme` prop.
- `Languages`: A type with the available languages. You can use it in your UI components to type the `language` prop.

## Light/Dark Mode

To active light/dark mode styles for Shiki code blocks, add the following CSS to your global styles:

```css
html.light .shiki,
html.light .shiki span {
  font-family: var(--font-mono) !important;
  background-color: transparent !important;
}

html.dark .shiki,
html.dark .shiki span {
  color: var(--shiki-dark) !important;
  font-family: var(--font-mono) !important;
}
```

## Usage

You can use the `highlight` function to get syntax highlighted code. For example:

```ts title="Shiki Highlighter Usage"
import { highlight } from "@/utils/shiki-highlighter";

const code = `console.log('hello')`;
const highlighter = await highlight();
const html = highlighter.codeToHtml(code, {
  lang: "javascript",
  theme: "one-light",
});
```

## Themes

There are multiple themes available in the `@shikijs/themes` package. You can find the full list of themes in the [Shiki Themes documentation](https://shiki.style/themes).

If you need to use a different theme:

1. Update the import statements in the `shiki-highlighter.ts` file:

```ts
// Themes:
import lightTheme from "@shikijs/themes/one-light"; // Light Theme
import darkTheme from "@shikijs/themes/one-dark-pro"; // Dark Theme
```

2. Update the `Themes` type:

```ts
type Themes = "one-light" | "one-dark-pro";
```

## Languages

There are multiple languages available in the `@shikijs/langs` package. You can find the full list of languages in the [Shiki Languages documentation](https://shiki.style/languages).

If you need to use different languages:

1. Update the import statements in the `shiki-highlighter.ts` file:

```ts
// Languages:
import js from "@shikijs/langs/js";
import ts from "@shikijs/langs/ts";
import tsx from "@shikijs/langs/tsx";
//...
```

2. Update the `Languages` type:

```ts
type Languages = "js" | "ts" | "tsx" | ... ;
```

## MDX Integration

1. Install the `@shikijs/rehype` package:

```bash
npm install @shikijs/rehype -D
```

2. Create a `rehypeShikiOptions` utility to configure the MDX plugin:

```tsx
import type { RehypeShikiCoreOptions } from "@shikijs/rehype/core";

const rehypeShikiOptions: RehypeShikiCoreOptions = {
  themes: {
    light: "one-light",
    dark: "one-dark-pro",
  },
};

export { rehypeShikiOptions };
```

3. Use the `highlight` and `rehypeShikiOptions` in your MDX setup as Rehype plugin:

```ts {8}
import rehypeShiki from "@shikijs/rehype/core";
import { highlight } from "@/utils/shiki-highlighter";
import { rehypeShikiOptions } from "@/utils/rehype-shiki-options";

const highlighter = await highlight();

const mdx = await compileMDX(context, document, {
  rehypePlugins: [[rehypeShiki, highlighter, rehypeShikiOptions]],
});
```
