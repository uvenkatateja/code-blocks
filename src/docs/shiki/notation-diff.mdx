---
title: Notation Diff
description: How to add diff notation to show added and removed lines in code blocks.
category: Shiki
---

<Showcase>

```ts
const code = `type Languages = "javascript" | "typescript";`;
const highlighter = await highlight();
const html = highlighter.codeToHtml(code, {
  lang: "javascript", // [!code --]
  lang: "typescript", // [!code ++]
  theme: "one-light",
});
```

</Showcase>

## Installation

1. Install the following dependencies:

```bash title="Shiki Transformers Dependency"
npm install @shikijs/transformers -D
```

2. Set up `transformerNotationDiff`:

```ts title="Shiki Notation Highlight Transformer"
import { transformerNotationDiff } from "@shikijs/transformers";

const rehypeShikiOptions: RehypeShikiCoreOptions = {
  //...
  transformers: [transformerNotationDiff()],
};

export { rehypeShikiOptions };
```

3. Add the following styles to your global CSS file:

```css title="src/styles/globals.css"
pre.has-diff span.line.diff {
  @apply relative inline-block w-full;
}

pre.has-diff span.line.diff.add {
  @apply bg-green-300/20 dark:bg-green-700/20;
  &::before {
    content: "+";
    @apply absolute left-2 text-green-600 dark:text-green-400;
  }
}

pre.has-diff span.line.diff.remove {
  @apply bg-red-300/20 opacity-70 dark:bg-red-600/20;
  &::before {
    content: "-";
    @apply absolute left-2 text-red-600 dark:text-red-400;
  }
}
```

## Usage

To add diff notation to your code blocks, use the `[!code ++]` and `[!code --]` markers to indicate added and removed lines, respectively:

````mdx
```
const code = `type Languages = "javascript" | "typescript";`;
const highlighter = await highlight();
const html = highlighter.codeToHtml(code, {
  lang: "javascript", // [!code --]
  lang: "typescript", // [!code ++]
  theme: "one-light",
});
```
````
